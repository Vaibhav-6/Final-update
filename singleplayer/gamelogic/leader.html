<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>LeaderBoard</title>
      <link rel="stylesheet" href="styles.css" />
      <script src="../icon.js"></script>
   </head>

   <body>
      <!-- 	<div class="blog">Visit <a href="#" target="_blank">My Blog</a></div> -->

      <div class="leaderboard">
         <div class="head">
            <i
               ><img
                  class="icon"
                  src="https://img.icons8.com/nolan/64/leaderboard.png"
            /></i>
            <h1>LeaderBoard</h1>
         </div>
         <table>
            <tr>
               <th id="use">User</th>
               <th>Score</th>
               <th id="mod">Mode</th>
               <th id="dat">Date</th>
            </tr>
         </table>

         <div class="body">
            <ol id="menu">
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark class="fg1"></mark>
               </li>
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark></mark>
               </li>
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark></mark>
               </li>
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark></mark>
               </li>
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark></mark>
               </li>
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark></mark>
               </li>
               <li>
                  <mark></mark>
                  <small></small>
                  <mark class="fg"></mark>
                  <mark></mark>
               </li>
            </ol>
         </div>
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
      <script src="../icon.js"></script>

      <script>
         const socket = io.connect(
            "https://back-end-server-vaibhav.herokuapp.com/"
         );

         socket.emit("getlead");
         socket.on("leaders", (data) => {
            //console.log(data);
            function compare(a, b) {
               if (b.data < a.data) {
                  return -1;
               }
               if (b.data > a.data) {
                  return 1;
               }
               return 0;
            }
            let vai = data.sort(compare);
            for (let index = 0; index < vai.length; index++) {
               socket.emit("sending", vai[index]);
            }
         });
         let leaderboard = [];

         socket.on("finallist", (data1) => {
            leaderboard.push({ data1 });
            //console.log(leaderboard);
            bruh(leaderboard);
         });
         function bruh(data2) {
            //console.log(leaderboard[0]);
            let data = document.getElementById("menu");

            //First Li
            let val1 = data.firstElementChild;
            val1.firstElementChild.innerHTML =
               data2[0].data1.user.substring(0, 6) +
               " " +
               data2[0].data1.user.substring(6, data2[0].data1.user.length);
            val1.firstElementChild.nextElementSibling.innerHTML =
               data2[0].data1.score;
            val1.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[0].data1.m;
            val1.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[0].data1.d;

            //next LI
            if (data2[1] == undefined) return;
            let val2 = data.firstElementChild.nextElementSibling;
            val2.firstElementChild.innerHTML =
               data2[1].data1.user.substring(0, 6) +
               " " +
               data2[1].data1.user.substring(6, data2[1].data1.user.length);
            val2.firstElementChild.nextElementSibling.innerHTML =
               data2[1].data1.score;
            val2.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[1].data1.m;
            val2.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[1].data1.d;

            if (data2[2] == undefined) return;
            let val3 =
               data.firstElementChild.nextElementSibling.nextElementSibling;
            val3.firstElementChild.innerHTML =
               data2[2].data1.user.substring(0, 6) +
               " " +
               data2[2].data1.user.substring(6, data2[2].data1.user.length);
            val3.firstElementChild.nextElementSibling.innerHTML =
               data2[2].data1.score;
            val3.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[2].data1.m;
            val3.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[2].data1.d;

            if (data2[3] == undefined) return;
            let val4 =
               data.firstElementChild.nextElementSibling.nextElementSibling
                  .nextElementSibling;
            val4.firstElementChild.innerHTML =
               data2[3].data1.user.substring(0, 6) +
               " " +
               data2[3].data1.user.substring(6, data2[3].data1.user.length);
            val4.firstElementChild.nextElementSibling.innerHTML =
               data2[3].data1.score;
            val4.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[3].data1.m;
            val4.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[3].data1.d;

            if (data2[4] == undefined) return;
            let val5 =
               data.firstElementChild.nextElementSibling.nextElementSibling
                  .nextElementSibling.nextElementSibling;
            val5.firstElementChild.innerHTML =
               data2[4].data1.user.substring(0, 6) +
               " " +
               data2[4].data1.user.substring(6, data2[4].data1.user.length);
            val5.firstElementChild.nextElementSibling.innerHTML =
               data2[4].data1.score;
            val5.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[4].data1.m;
            val5.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[4].data1.d;

            if (data2[5] == undefined) return;
            let val6 =
               data.firstElementChild.nextElementSibling.nextElementSibling
                  .nextElementSibling.nextElementSibling.nextElementSibling;
            val6.firstElementChild.innerHTML =
               data2[5].data1.user.substring(0, 6) +
               " " +
               data2[5].data1.user.substring(6, data2[5].data1.user.length);
            val6.firstElementChild.nextElementSibling.innerHTML =
               data2[5].data1.score;
            val6.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[5].data1.m;
            val6.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[5].data1.d;

            if (data2[6] == undefined) return;
            let val7 =
               data.firstElementChild.nextElementSibling.nextElementSibling
                  .nextElementSibling.nextElementSibling.nextElementSibling
                  .nextElementSibling;
            val7.firstElementChild.innerHTML =
               data2[6].data1.user.substring(0, 6) +
               " " +
               data2[6].data1.user.substring(6, data2[6].data1.user.length);
            val7.firstElementChild.nextElementSibling.innerHTML =
               data2[6].data1.score;
            val7.firstElementChild.nextElementSibling.nextElementSibling.innerHTML =
               data2[6].data1.m;
            val7.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML =
               data2[6].data1.d;
         }
      </script>
   </body>
</html>
